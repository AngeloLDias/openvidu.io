---
layout: docs-layout
title: OpenVidu Documentation - openvidu-insecure-js
active: documentation
---

<script src="/js/jquery-3.2.1.slim.min.js"></script>

<link rel="stylesheet" href="/css/syntax.css" />
<script src="/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<script type="text/javascript">
	$(document).ready(function () {
		$('li.subnav_drop').find('ul.subnav').hide();
		$(".subnav").find("li:contains('openvidu-insecure-js')").each(function (i, e) {
			var currentElement = $(e);
			currentElement.parent().css({
				"display": "block",
				"visibility": "visible"
			}); //css("background-color","blue");
			currentElement.css({
				"display": "block",
				"visibility": "visible"
			});
		});
		$('li.subnav_drop div').click(function (i, e) {
			//$('li.subnav_drop span').not(this).find('ul.subnav').hide();
			$(this).parent().find('ul.subnav').toggle();
		});

		var minHeight = $('#sticky-menu').outerHeight() + 100;
		$('#doc-container').css('min-height', minHeight + 'px');
	});

	$(".wy-nav-content").find("li:contains('openvidu-insecure-js')").css('color', 'red');
</script>

<div id="doc-container" class="container text-justify">
		<div id="sticky-menu" class="col-lg-3 col-md-4 col-sm-12 col-xs-12">

			
			<nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
				<div class="wy-menu wy-menu-vertical" role="navigation" aria-label="main navigation">
					<div id="site-menu-title">
						<h3>Explore docs</h3>
						<hr>
					</div>
					<ul id="menu-list" class="current">
						 
						<li>
							<ul> 

<li class="subnav_drop"><div><span>Home</span></div>
    <ul class="subnav" hidden>
          

<li class="toctree-l1 ">
    <a class="" href="../../home/">Home</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../home/openvidu-basics/">OpenVidu Basics</a> 
</li>

 
</li>
</ul>

</ul>
						</li>
						  
						<li>
							<ul> 

<li class="subnav_drop"><div><span>Tutorials</span></div>
    <ul class="subnav" hidden>
          

<li class="toctree-l1 ">
    <a class="" href="../">Intro</a> 
</li>

   

<li class="toctree-l1 current">
    <a class="current" href="./">openvidu-insecure-js</a>  
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../openvidu-insecure-angular/">openvidu-insecure-angular</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../openvidu-js-java/">openvidu-js-java</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../openvidu-mvc-java/">openvidu-mvc-java</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../openvidu-js-node/">openvidu-js-node</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../openvidu-mvc-node/">openvidu-mvc-node</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../openvidu-getaroom/">openvidu-getaroom</a> 
</li>

 
</li>
</ul>

</ul>
						</li>
						  
						<li>
							<ul> 

<li class="subnav_drop"><div><span>API</span></div>
    <ul class="subnav" hidden>
          

<li class="toctree-l1 ">
    <a class="" href="../../api/openvidu-browser/">openvidu-browser</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../api/openvidu-java-client/">openvidu-java-client</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../api/openvidu-node-client/">openvidu-node-client</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../api/REST-API/">REST API</a> 
</li>

 
</li>
</ul>

</ul>
						</li>
						  
						<li>
							<ul> 

<li class="subnav_drop"><div><span>Deployment</span></div>
    <ul class="subnav" hidden>
          

<li class="toctree-l1 ">
    <a class="" href="../../deployment/">Deploying on AWS</a> 
</li>

 
</li>
</ul>

</ul>
						</li>
						  
						<li>
							<ul> 

<li class="subnav_drop"><div><span>Contribute</span></div>
    <ul class="subnav" hidden>
          

<li class="toctree-l1 ">
    <a class="" href="../../developing/">Developing OpenVidu</a> 
</li>

 
</li>
</ul>

</ul>
						</li>
						 
					</ul>
				</div>
				&nbsp;
			</nav>
		</div>

		<section class="col-lg-9 col-md-8 col-sm-12 col-xs-12">
			
			<div>
				<div>

					<div role="main">
						<div class="section">
							 <h1 id="openvidu-insecure-js">openvidu-insecure-js</h1>
<p>This is the simplest demo you can try to get started with OpenVidu. It has the minimum set of features to make a video-call. You will only need a few minutes to get your first application working.</p>
<h2 id="understanding-this-example">Understanding this example</h2>
<p align="center">
  <img class="img-responsive" src="https://docs.google.com/uc?id=0B61cQ4sbhmWSeVBWdkFwWEtqNjA">
</p>

<p>OpenVidu is composed by the three modules displayed on the image above in its insecure version.</p>
<ul>
<li><strong>openvidu-browser</strong>: JavaScript library for the browser. It allows you to manage your video-calls straight away from your clients</li>
<li><strong>openvidu-server</strong>: Java application that controls Kurento Media Server</li>
<li><strong>Kurento Media Server</strong>: server that handles low level operations of media flows transmission</li>
</ul>
<blockquote>
<p>You will only have to make use of <strong>openvidu-browser</strong> to get this sample app working.</p>
</blockquote>
<h2 id="executing-this-example">Executing this example</h2>
<p>1) Clone the repo:</p>
<pre><code class="bash">git clone https://github.com/OpenVidu/openvidu-tutorials.git
</code></pre>

<p>2) You will need an http web server installed in your development computer to execute the sample application. If you have <em>node.js</em> installed, you can use <a href="https://github.com/indexzero/http-server">http-server</a> to serve application files. It can be installed with:</p>
<pre><code class="bash">npm install -g http-server
</code></pre>

<p>3) To run the sample application, execute the following command in the project:</p>
<pre><code class="bash">http-server openvidu-insecure-js/web
</code></pre>

<p>4) <em>openvidu-server</em> and <em>Kurento Media Server</em> must be up and running in your development machine. The easiest way is running this Docker container which wraps both of them (you will need <a href="https://store.docker.com/search?type=edition&amp;offering=community">Docker CE</a>):</p>
<pre><code class="bash">docker run -p 8443:8443 --rm -e KMS_STUN_IP=193.147.51.12 -e KMS_STUN_PORT=3478 -e openvidu.security=false openvidu/openvidu-server-kms
</code></pre>

<p>5) Go to <a href="http://localhost:8080"><code>localhost:8080</code></a> to test the app once the server is running. The first time you use the docker container, an alert message will suggest you accept the self-signed certificate of <em>openvidu-server</em> when you first try to join a video-call.</p>
<h2 id="understanding-the-code">Understanding the code</h2>
<p>This application is very simple. It has only 4 files:</p>
<ul>
<li><code>OpenVidu.js</code>: openvidu-browser library. You don't have to manipulate this file. </li>
<li><code>app.js</code>: sample application main JavaScritp file, which makes use of <em>OpenVidu.js</em>. You can manipulate this file to suit your needs.</li>
<li><code>index.html</code>: HTML code for the form to connect to a video-call and for the video-call itself. You can manipulate this file to suit your needs. 
    It has two links to both JavaScript files: </li>
</ul>
<pre><code class="html">&lt;script src=&quot;OpenVidu.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;app.js&quot;&gt;&lt;/script&gt;
</code></pre>

<ul>
<li><code>style.css</code>: some CSS classes to style <em>index.html</em>. You can manipulate this file to suit your needs.</li>
</ul>
<p>Let's see how <code>app.js</code> uses <code>OpenVidu.js</code>:</p>
<hr />
<p><strong>First lines declare the two variables that will be needed in different points along the code. <code>OV</code> will be our OpenVidu object and <code>session</code> the video-call we will connect to:</strong></p>
<pre><code class="javascript">var OV;
var session;
</code></pre>

<hr />
<p><strong>Let's initialize a new session and configure our events:</strong></p>
<pre><code class="javascript">// --- 1) Get an OpenVidu object and init a session with a sessionId ---

// Init OpenVidu object
OV = new OpenVidu();

// We will join the video-call &quot;sessionId&quot;. This parameter must start with the URL of OpenVidu Server
session = OV.initSession('wss://' + location.hostname + ':8443/' + sessionId);
</code></pre>

<p>Since we are in a local sample app, <code>OV</code> object is initialize with <code>localhost:8443</code> as its <em>openvidu-server</em> URL. <code>session</code> object is initialize with <code>sessionId</code> param: this means we will connect to <code>sessionId</code> video-call. In this case, this parameter is retrieve from HTML input     <code>&lt;input type="text" id="sessionId" required&gt;</code>, which may be filled by the user.</p>
<pre><code class="javascript">// --- 2) Specify the actions when events take place ---

// On every new Stream received...
session.on('streamCreated', function (event) {

    // Subscribe to the Stream to receive it. HTML video will be appended to element with 'subscriber' id
    var subscriber = session.subscribe(event.stream, 'subscriber');

    // When the HTML video has been appended to DOM...
    subscriber.on('videoElementCreated', function (event) {

        // Add a new &lt;p&gt; element for the user's nickname just below its video
        appendUserData(event.element, subscriber.stream.connection);
    });
});

// On every Stream destroyed...
session.on('streamDestroyed', function (event) {

    // Delete the HTML element with the user's nickname. HTML videos are automatically removed from DOM
    removeUserData(event.stream.connection);
});
</code></pre>

<p>Here we subscribe to the events that interest us. In this case, we want to receive all videos published to the video-call, as well as displaying every user's nickname nex to its video. To achieve this:</p>
<p><code>streamCreated</code>: for each new Stream received by OpenVidu, we immediately subscribe to it so we can see its video. A new HTML video element will be appended to element with id 'subscriber'. </p>
<p><code>videoElementCreated</code>: event triggered by Subscriber object (returned by the previous <code>Session.subscribe</code> method). This allows us to add the participant nickname to the new video previously added in <code>streamCreated</code> event. Auxiliary method <code>appendUserData</code> is responsible for appending a new paragraph element just below the <code>event.element</code> video, containing <code>subscriber.stream.connection.data</code> field (which has the user's nickname).</p>
<p><code>streamDestroyed</code>: for each Stream that has been destroyed (which means a user has left the video-call), we remove the paragraph element with the user's nickname that we added in the previous event (<code>appendUserData</code> method created the element with an <em>id</em> containing <code>event.stream.connection.connectionId</code> unique value, so we can now identify the right element to be removed). The video element is automatically deleted by default, so we don't need to do anything else.</p>
<hr />
<p><strong>Finally connect to the session and publish your webcam:</strong></p>
<pre><code class="javascript">// --- 3) Connect to the session ---

// 'token' param irrelevant when using insecure version of OpenVidu.
// Second param will be received by every user in Stream.connection.data property,
// which will be appended to DOM as the user's nickname
session.connect(token, '{&quot;clientData&quot;: &quot;' + token + '&quot;}', function (error) {

    // If connection successful, initialize a publisher and publish to the session
    if (!error) {

        // --- 4) Get your own camera stream with the desired resolution ---

        // Both audio and video will be active. HTML video element will be
        // appended to element with 'publisher' id
        var publisher = OV.initPublisher('publisher', {
            audio: true,
            video: true,
            quality: 'MEDIUM'
        });

        // --- 5) Publish your stream ---

        session.publish(publisher);

    } else {
        console.log('There was an error connecting to the session:', error.code, error.message);
    }
});
</code></pre>

<p><code>token</code> param is irrelevant when using insecure version of OpenVidu. Remember <code>videoElementCreated</code> event, when we added the user's nickname to the HTML? Well, second parameter is the actual value you will receive in <code>Stream.connection.data</code> property. So in this case it is a JSON formatted string with a "clientData" tag with "token" value, which is retrieved from HTML input <code>&lt;input type="text" id="participantId" required&gt;</code> (filled by the user).</p>
<p>In the callback of <code>Session.connect</code> method, we check the connection has been succesful (<code>error</code> value must be <em>null</em>) and right after that we get a <code>Publisher</code> object with both audio and video activated and MEDIUM quality. This process will end with the addition of a new HTML video element showing your camera, as a child of element with <em>id</em> 'publisher'. We then just have to publish this object through <code>Session.publish</code> method, and the rest of users will begin receiving our webcam.</p> 
						</div>
					</div> <footer>
<hr>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../openvidu-insecure-angular/" class="btn btn-xs btn-primary float-right" title="openvidu-insecure-angular">Next &raquo;<span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../" class="btn btn-xs btn-primary" title="Intro"><span class="icon icon-circle-arrow-left"></span> &laquo; Prev</a>
      
    </div>
  


  
  <div id="edit-github">
  
	  <a href="https://github.com/OpenVidu/openvidu.io-docs/blob/master/docs/tutorials/openvidu-insecure-js.md"><i class="icon ion-social-github"></i> Edit Documentation on GitHub</a>
  
  </div>
</footer> 
				</div>
			</div>
		</section>
</div>