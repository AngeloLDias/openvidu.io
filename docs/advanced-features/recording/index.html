---
layout: docs-layout
title: OpenVidu Documentation - Recording
active: documentation
---

<script src="/js/plugins/jquery.min.js"></script>

<link rel="stylesheet" href="/css/syntax.css" />
<script src="/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<script type="text/javascript">
	$(document).ready(function () {
		$('li.subnav_drop').find('ul.subnav').hide();
		$(".subnav").find("li:contains('Recording')").each(function (i, e) {
			var currentElement = $(e);
			currentElement.parent().css({
				"display": "block",
				"visibility": "visible"
			}); //css("background-color","blue");
			currentElement.css({
				"display": "block",
				"visibility": "visible"
			});
		});
		$('li.subnav_drop div').click(function (i, e) {
			//$('li.subnav_drop span').not(this).find('ul.subnav').hide();
			$(this).parent().find('ul.subnav').toggle();
		});

		var minHeight = $('#sticky-menu').outerHeight() + 100;
		$('#doc-container').css('min-height', minHeight + 'px');
	});

	$(".wy-nav-content").find("li:contains('Recording')").css('color', 'red');
</script>

<div id="doc-container" class="container text-justify">
		<div id="sticky-menu" class="col-lg-3 col-md-4 col-sm-12 col-xs-12">

			
			<nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
				<div class="wy-menu wy-menu-vertical" role="navigation" aria-label="main navigation">
					<div id="site-menu-title">
						<h3>Explore docs</h3>
						<hr>
					</div>
					<ul id="menu-list" class="current">
						 
						<li>
							<ul> 

<li class="toctree-l1 ">
    <a class="" href="../../home/">What is OpenVidu?</a> 
</li>

</ul>
						</li>
						  
						<li>
							<ul> 

<li class="subnav_drop"><div><span>Tutorials</span></div>
    <ul class="subnav" hidden>
          

<li class="toctree-l1 ">
    <a class="" href="../../tutorials/">Intro</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../tutorials/openvidu-hello-world/">openvidu-hello-world</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../tutorials/openvidu-insecure-js/">openvidu-insecure-js</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../tutorials/openvidu-insecure-angular/">openvidu-insecure-angular</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../tutorials/openvidu-js-java/">openvidu-js-java</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../tutorials/openvidu-mvc-java/">openvidu-mvc-java</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../tutorials/openvidu-js-node/">openvidu-js-node</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../tutorials/openvidu-mvc-node/">openvidu-mvc-node</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../tutorials/openvidu-getaroom/">openvidu-getaroom</a> 
</li>

 
</li>
</ul>

</ul>
						</li>
						  
						<li>
							<ul> 

<li class="subnav_drop"><div><span>How do I ... ?</span></div>
    <ul class="subnav" hidden>
          

<li class="toctree-l1 ">
    <a class="" href="../../how-do-i/create-session/">Create a session</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../how-do-i/join-session/">Join a session</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../how-do-i/leave-session/">Leave a session</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../how-do-i/subscribe-unsubscribe/">Subscribe/Unsubscribe from a stream</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../how-do-i/publish-unpublish/">Publish/Unpublish a stream</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../how-do-i/mute-audio-video/">Mute/Unmute audio and video</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../how-do-i/share-data/">Share data between users</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../how-do-i/send-messages/">Send text messages</a> 
</li>

 
</li>
</ul>

</ul>
						</li>
						  
						<li>
							<ul> 

<li class="subnav_drop"><div><span>Advanced features</span></div>
    <ul class="subnav" hidden>
          

<li class="toctree-l1 current">
    <a class="current" href="./">Recording</a>  
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../screen-share/">Screen share</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../speech-detection/">Speech detection</a> 
</li>

 
</li>
</ul>

</ul>
						</li>
						  
						<li>
							<ul> 

<li class="subnav_drop"><div><span>Reference Documentation</span></div>
    <ul class="subnav" hidden>
          

<li class="toctree-l1 ">
    <a class="" href="../../reference-docs/openvidu-browser/">openvidu-browser API</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../reference-docs/openvidu-java-client/">openvidu-java-client API</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../reference-docs/openvidu-node-client/">openvidu-node-client API</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../reference-docs/REST-API/">REST  API</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../reference-docs/openvidu-server-params/">OpenVidu Server configuration</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../reference-docs/openvidu-artifacts/">OpenVidu Artifacts</a> 
</li>

 
</li>
</ul>

</ul>
						</li>
						  
						<li>
							<ul> 

<li class="subnav_drop"><div><span>Deployment</span></div>
    <ul class="subnav" hidden>
          

<li class="toctree-l1 ">
    <a class="" href="../../deployment/deploying-demos-aws/">Deploying OpenVidu Demos on AWS (TUTORIAL)</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../deployment/deploying-aws/">Deploying OpenVidu Server and your app on AWS</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../deployment/deploying-ubuntu/">Deploying OpenVidu in Ubuntu</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../deployment/custom-certificate/">Using your own certificate</a> 
</li>

 
</li>
</ul>

</ul>
						</li>
						  
						<li>
							<ul> 

<li class="subnav_drop"><div><span>Contribute</span></div>
    <ul class="subnav" hidden>
          

<li class="toctree-l1 ">
    <a class="" href="../../developing/">Developing OpenVidu</a> 
</li>

 
</li>
</ul>

</ul>
						</li>
						  
						<li>
							<ul> 

<li class="toctree-l1 ">
    <a class="" href="../../troubleshooting/">Troubleshooting / FAQ</a> 
</li>

</ul>
						</li>
						 
					</ul>
				</div>
				&nbsp;
			</nav>
		</div>

		<section class="col-lg-9 col-md-8 col-sm-12 col-xs-12">
			
			<div>
				<div>

					<div role="main">
						<div class="section">
							 <h1 id="recording">Recording</h1>
<p><em>(since <strong>v1.7.0</strong>)</em></p>
<p>OpenVidu Server can be configured to record sessions. In the current version 1.7.0, every publisher stream is composed in the same video file in a grid layout.</p>
<p>For example, in a session with two publishers the video file will look like this:</p>
<p>
    <img class="img-responsive deploy-img" src="/img/docs/advanced-features/recorded-video.png">
</p>

<div style="
    display: table;
    border: 1px solid #0088aa;
    border-radius: 5px;
    width: 100%;
    margin-top: 30px;
    margin-bottom: 25px;"><div style="display: table-cell">
    <i class="icon ion-android-alert" style="
    font-size: 50px;
    color: #0088aa;
    display: inline-block;
    padding-left: 25%;
"></i></div>
<div style="
    vertical-align: middle;
    display: table-cell;
    padding-left: 20px;
    padding-right: 20px;
    ">
    This type of grid recording is a pretty heavy consuming process. In order to record sessions and achieve good quality in the resulting videos it is strongly recommended to launch OpenVidu Server in a host with generous computing resources (Multicore >= 1GHz, 16GB of RAM)
</div>
</div>

<p><br></p>
<p>To start OpenVidu Server properly configured to allow session recording it is necessary to:</p>
<h3 id="1-have-docker-ce-installed-in-the-host-machine">1. Have Docker CE installed in the host machine</h3>
<p>OpenVidu recording module consists of a Docker image that needs to be downloaded from the cloud. The process is <strong>100% automatic</strong>, but you will need <a href="https://www.docker.com/community-edition#/download">Docker CE</a> installed in your server. If you enable OpenVidu recording service but there's no Docker installed, OpenVidu Server will fail to init, throwing the following exception:</p>
<p><code>Exception connecting to Docker daemon: you need Docker installed in this machine to enable OpenVidu recorder service</code></p>
<p><br></p>
<blockquote>
<p><strong><a href="../../deployment/deploying-aws/">OpenVidu CloudFormation</a> already includes the Docker image for recording service. You don't need to install anything or wait during the first execution if you use this type of deployment for OpenVidu Server</strong></p>
</blockquote>
<h3 id="2-launch-openvidu-server-with-new-environment-variables">2. Launch OpenVidu Server with new environment variables</h3>
<p><em>(Only variables related with OpenVidu recording service are stated below. To see a complete list of available environment variables, visit <a href="../../reference-docs/openvidu-server-params/">OpenVidu Server configuration</a>)</em></p>
<h4 id="for-openvidu-server-jar">For OpenVidu Server JAR</h4>
<pre><code class="console">java -jar \
    -Dopenvidu.recording=true \
    -Dopenvidu.recording.path=/path/to/video/files \
    -Dopenvidu.recording.free-access=true \
openvidu-server.jar
</code></pre>

<ul>
<li><code>openvidu.recording</code>: if <em>true</em> OpenVidu recording service is enabled and sessions can be configured to be recorded. During the first execution of <em>openvidu-server.jar</em>, a Docker image (<a href="https://hub.docker.com/r/openvidu/openvidu-recording/">openvidu/openvidu-recording</a>) will be downloaded.</li>
<li><code>openvidu.recording.path</code>: where to store the recorded video files on the host machine.</li>
<li><code>openvidu.recording.free-access</code>: if <em>true</em> any client can connect to<p style="text-align: center; margin: 8px 0 8px 0; word-wrap: break-word;"><strong>https://OPENVIDU_SERVER_IP:OPENVIDU_PORT/recordings/any_session_file.mp4</strong></p> and access any recorded video file. If <em>false</em> this path will be secured with <code>openvidu.secret</code> param just as OpenVidu Server dashboard at <strong>https://OPENVIDU_SERVER_IP:OPENVIDU_PORT</strong></li>
</ul>
<h4 id="for-openvidu-server-docker-image">For OpenVidu Server Docker image</h4>
<p><strong><a href="https://hub.docker.com/r/openvidu/openvidu-server-kms/">openvidu/openvidu-server-kms</a></strong></p>
<pre><code class="console">docker run -p 8443:8443 --rm \
    -v /var/run/docker.sock:/var/run/docker.sock \
    -v /PATH/TO/VIDEO/FILES:/PATH/TO/VIDEO/FILES \
    -e openvidu.recording=true \
    -e MY_UID=$(id -u $USER) \
    -e openvidu.recording.path=/PATH/TO/VIDEO/FILES \
    -e openvidu.recording.free-access=true \
openvidu/openvidu-server-kms
</code></pre>

<p><strong><a href="https://hub.docker.com/r/openvidu/openvidu-server/">openvidu/openvidu-server</a></strong> (KMS up and running in the host machine)</p>
<pre><code class="console">docker run --net=&quot;host&quot; -p 8443:8443 --rm \
    -v /var/run/docker.sock:/var/run/docker.sock \
    -v /PATH/TO/VIDEO/FILES:/PATH/TO/VIDEO/FILES \
    -e openvidu.recording=true \
    -e MY_UID=$(id -u $USER) \
    -e openvidu.recording.path=/PATH/TO/VIDEO/FILES \
    -e openvidu.recording.free-access=true \
openvidu/openvidu-server
</code></pre>

<ul>
<li><code>openvidu.recording</code>: <em>same as for OpenVidu Server JAR</em></li>
<li><code>openvidu.recording.path</code>: <em>same for in OpenVidu Server JAR</em></li>
<li><code>openvidu.recording.free-access</code>: <em>same as for OpenVidu Server JAR</em></li>
</ul>
<p>It is also necessary to mount 2 volumes and pass <code>MY_UID</code> variable:</p>
<ul>
<li><code>-v /var/run/docker.sock:/var/run/docker.sock</code>: gives openvidu-server container access to the local Docker daemon</li>
<li><code>-v /PATH/TO/VIDEO/FILES:/PATH/TO/VIDEO/FILES</code>: gives access to the recorded video files through the container</li>
<li><code>-e MY_UID=$(id -u $USER)</code>: for permission reasons</li>
</ul>
<blockquote>
<p><code>/PATH/TO/VIDEO/FILES</code> must be the same in <code>openvidu.recording.path=/PATH/TO/VIDEO/FILES</code> property and in<br><code>-v /PATH/TO/VIDEO/FILES:/PATH/TO/VIDEO/FILES</code> option if you want to have acces to the video files from outside the container</p>
</blockquote>
<h3 id="3-configure-your-sessions-to-be-recorded">3. Configure your Sessions to be recorded</h3>
<p>Setting property <code>openvidu.recording</code> to <em>true</em> only automatically enables recordings for insecure sessions (those directly created from the client side. See <a href="../../troubleshooting/#4-why-does-my-app-need-a-server-side">this FAQ</a> and <a href="../../troubleshooting/#5-what-are-the-differences-related-to-openvidu-between-an-app-without-a-server-side-and-an-app-with-a-server-side">this FAQ</a>).</p>
<p>In order to record a regular securized session, it is necessary to explicitly configure it through the <a href="../../reference-docs/REST-API/">REST API</a> or any of the server clients (<a href="../../reference-docs/openvidu-java-client/">openvidu-java-client</a>, <a href="../../reference-docs/openvidu-node-client/">openvidu-node-client</a>). As seen in the API documentation ...</p>
<h4 id="api-rest">API REST</h4>
<p>The body of the POST request in order to generate a sessionId (<code>/api/sessions</code>) must be:</p>
<pre><code class="json">{&quot;archiveMode&quot;: &quot;ALWAYS&quot;, &quot;archiveLayout&quot;: &quot;BEST_FIT&quot;, &quot;mediaMode&quot;: &quot;ROUTED&quot;}
</code></pre>

<h4 id="openvidu-java-client">openvidu-java-client</h4>
<p>Call <code>OpenVidu.createSession()</code> passing as optional parameter a <code>SessionProperties</code> object properly configured</p>
<pre><code class="java">import io.openvidu.java.client.ArchiveLayout;
import io.openvidu.java.client.ArchiveMode;
import io.openvidu.java.client.MediaMode;
import io.openvidu.java.client.OpenVidu;
import io.openvidu.java.client.Session;
import io.openvidu.java.client.SessionProperties;

...

OpenVidu openvidu = new OpenVidu(OPENVIDU_URL, OPENVIDU_SECRET);
SessionProperties properties = new SessionProperties.Builder()
    .archiveMode(ArchiveMode.ALWAYS)
    .archiveLayout(ArchiveLayout.BEST_FIT)
    .mediaMode(MediaMode.ROUTED)
    .build();
Session session = openVidu.createSession(properties);
</code></pre>

<h4 id="openvidu-node-client">openvidu-node-client</h4>
<p>Call <code>OpenVidu.createSession()</code> passing as optional parameter a <code>SessionProperties</code> object properly configured</p>
<pre><code class="javascript">var OpenVidu = require('openvidu-node-client').OpenVidu;
var SessionProperties = require('openvidu-node-client').SessionProperties;
var ArchiveLayout = require('openvidu-node-client').ArchiveLayout;
var ArchiveMode = require('openvidu-node-client').ArchiveMode;
var MediaMode = require('openvidu-node-client').MediaMode;

...

var openvidu = new OpenVidu(OPENVIDU_URL, OPENVIDU_SECRET);
var properties = new SessionProperties.Builder()
    .archiveLayout(ArchiveLayout.BEST_FIT)
    .archiveMode(ArchiveMode.MANUAL)
    .mediaMode(MediaMode.ROUTED)
    .build();
var mySession = openvidu.createSession(properties);
</code></pre>

<hr>

<h3 id="future-updates">Future updates</h3>
<ul>
<li>
<p><strong>Single stream recording</strong>: right now only grid layout recording is supported, but in the near future it is planned to support single stream recording for each participant publishing to the session. This type of video recording is intended to be much less demanding in terms of computing resources, and will provide developers greater freedom in the later processing of their videos.</p>
</li>
<li>
<p><strong>More grid layouts</strong>: only <code>BEST_FIT</code> layout is supported right now, but there are more layouts that will be available in next development iterations.</p>
</li>
</ul> 
						</div>
					</div> <footer>
<hr>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../screen-share/" class="btn btn-xs btn-primary float-right" title="Screen share">Next &raquo;<span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../../how-do-i/send-messages/" class="btn btn-xs btn-primary" title="Send text messages"><span class="icon icon-circle-arrow-left"></span> &laquo; Prev</a>
      
    </div>
  


  
  <div id="edit-github">
  
	  <a href="https://github.com/OpenVidu/openvidu.io-docs/blob/master/docs/advanced-features/recording.md"><i class="icon ion-social-github"></i> Edit Documentation on GitHub</a>
  
  </div>
</footer> 
				</div>
			</div>
		</section>
</div>