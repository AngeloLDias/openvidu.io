---
layout: docs-layout
title: OpenVidu Documentation - Recording
active: documentation
---

<script src="/js/plugins/jquery.min.js"></script>

<link rel="stylesheet" href="/css/syntax.css" />
<script src="/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<script type="text/javascript">
	$(document).ready(function () {
		$('li.subnav_drop').find('ul.subnav').hide();
		$(".subnav").find("li:contains('Recording')").each(function (i, e) {
			var currentElement = $(e);
			currentElement.parent().css({
				"display": "block",
				"visibility": "visible"
			}); //css("background-color","blue");
			currentElement.css({
				"display": "block",
				"visibility": "visible"
			});
		});
		$('li.subnav_drop div').click(function (i, e) {
			//$('li.subnav_drop span').not(this).find('ul.subnav').hide();
			$(this).parent().find('ul.subnav').toggle();
		});

		var minHeight = $('#sticky-menu').outerHeight() + 100;
		$('#doc-container').css('min-height', minHeight + 'px');
	});

	$(".wy-nav-content").find("li:contains('Recording')").css('color', 'red');
</script>

<div id="doc-container" class="container text-justify">
		<div id="sticky-menu" class="col-lg-3 col-md-4 col-sm-12 col-xs-12">

			
			<nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
				<div class="wy-menu wy-menu-vertical" role="navigation" aria-label="main navigation">
					<div id="site-menu-title">
						<h3>Explore docs</h3>
						<hr>
					</div>
					<ul id="menu-list" class="current">
						 
						<li>
							<ul> 

<li class="toctree-l1 ">
    <a class="" href="../../home/">What is OpenVidu?</a> 
</li>

</ul>
						</li>
						  
						<li>
							<ul> 

<li class="subnav_drop"><div><span>Tutorials</span></div>
    <ul class="subnav" hidden>
          

<li class="toctree-l1 ">
    <a class="" href="../../tutorials/">Intro</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../tutorials/openvidu-hello-world/">openvidu-hello-world</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../tutorials/openvidu-insecure-js/">openvidu-insecure-js</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../tutorials/openvidu-insecure-angular/">openvidu-insecure-angular</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../tutorials/openvidu-js-java/">openvidu-js-java</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../tutorials/openvidu-mvc-java/">openvidu-mvc-java</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../tutorials/openvidu-js-node/">openvidu-js-node</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../tutorials/openvidu-mvc-node/">openvidu-mvc-node</a> 
</li>

 
</li>
</ul>

</ul>
						</li>
						  
						<li>
							<ul> 

<li class="subnav_drop"><div><span>Demos</span></div>
    <ul class="subnav" hidden>
          

<li class="toctree-l1 ">
    <a class="" href="../../demos/openvidu-getaroom/">openvidu-getaroom</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../demos/openvidu-call/">openvidu-call</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../demos/openvidu-classroom/">openvidu-classroom</a> 
</li>

 
</li>
</ul>

</ul>
						</li>
						  
						<li>
							<ul> 

<li class="subnav_drop"><div><span>How do I ... ?</span></div>
    <ul class="subnav" hidden>
          

<li class="toctree-l1 ">
    <a class="" href="../../how-do-i/create-session/">Create a session</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../how-do-i/join-session/">Join a session</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../how-do-i/leave-session/">Leave a session</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../how-do-i/subscribe-unsubscribe/">Subscribe/Unsubscribe from a stream</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../how-do-i/publish-unpublish/">Publish/Unpublish a stream</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../how-do-i/mute-audio-video/">Mute/Unmute audio and video</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../how-do-i/manage-videos/">Manage video players</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../how-do-i/share-data/">Share data between users</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../how-do-i/send-messages/">Send text messages</a> 
</li>

 
</li>
</ul>

</ul>
						</li>
						  
						<li>
							<ul> 

<li class="subnav_drop"><div><span>Advanced features</span></div>
    <ul class="subnav" hidden>
          

<li class="toctree-l1 current">
    <a class="current" href="./">Recording</a>  
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../screen-share/">Screen share</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../speech-detection/">Speech detection</a> 
</li>

 
</li>
</ul>

</ul>
						</li>
						  
						<li>
							<ul> 

<li class="subnav_drop"><div><span>Reference Documentation</span></div>
    <ul class="subnav" hidden>
          

<li class="toctree-l1 ">
    <a class="" href="../../reference-docs/openvidu-browser/">openvidu-browser API</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../reference-docs/openvidu-java-client/">openvidu-java-client API</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../reference-docs/openvidu-node-client/">openvidu-node-client API</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../reference-docs/REST-API/">REST  API</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../reference-docs/openvidu-server-params/">OpenVidu Server configuration</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../reference-docs/openvidu-server-cdr/">OpenVidu Server CDR</a> 
</li>

 
</li>
</ul>

</ul>
						</li>
						  
						<li>
							<ul> 

<li class="subnav_drop"><div><span>Deployment</span></div>
    <ul class="subnav" hidden>
          

<li class="toctree-l1 ">
    <a class="" href="../../deployment/deploying-demos-aws/">Deploying OpenVidu Demos on AWS (TUTORIAL)</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../deployment/deploying-aws/">Deploying OpenVidu Server and your app on AWS</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../deployment/deploying-ubuntu/">Deploying OpenVidu in Ubuntu</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../deployment/custom-certificate/">Using your own certificate</a> 
</li>

 
</li>
</ul>

</ul>
						</li>
						  
						<li>
							<ul> 

<li class="subnav_drop"><div><span>Contribute</span></div>
    <ul class="subnav" hidden>
          

<li class="toctree-l1 ">
    <a class="" href="../../developing/">Developing OpenVidu</a> 
</li>

 
</li>
</ul>

</ul>
						</li>
						  
						<li>
							<ul> 

<li class="toctree-l1 ">
    <a class="" href="../../troubleshooting/">Troubleshooting / FAQ</a> 
</li>

</ul>
						</li>
						  
						<li>
							<ul> 

<li class="toctree-l1 ">
    <a class="" href="../../releases/">Releases</a> 
</li>

</ul>
						</li>
						 
					</ul>
				</div>
				&nbsp;
			</nav>
		</div>

		<section class="col-lg-9 col-md-8 col-sm-12 col-xs-12">
			
			<div>
				<div>

					<div role="main">
						<div class="section">
							 <h1 id="recording">Recording</h1>
<p>OpenVidu Server can be configured to record sessions. In the current version, every publisher stream is composed in the same video file in a grid layout, generating a unique MP4 file when the recording stops.</p>
<p>For example, in a session with two publishers the video file will look like this:</p>
<p>
    <img class="img-responsive deploy-img" src="/img/docs/advanced-features/recorded-video.png">
</p>

<div style="
    display: table;
    border: 1px solid #0088aa;
    border-radius: 5px;
    width: 100%;
    margin-top: 30px;
    margin-bottom: 25px;"><div style="display: table-cell">
    <i class="icon ion-android-alert" style="
    font-size: 50px;
    color: #0088aa;
    display: inline-block;
    padding-left: 25%;
"></i></div>
<div style="
    vertical-align: middle;
    display: table-cell;
    padding-left: 20px;
    padding-right: 20px;
    ">
    This type of grid recording is a pretty heavy consuming process. In order to record sessions and achieve good quality in the resulting videos it is strongly recommended to launch OpenVidu Server in a host with generous computing resources (Multicore >= 1GHz, 16GB of RAM)
</div>
</div>

<p><br></p>
<p>To start OpenVidu Server properly configured to allow session recording it is necessary to:</p>
<h3 id="1-have-docker-ce-installed-in-the-host-machine">1. Have Docker CE installed in the host machine</h3>
<p>OpenVidu recording module consists of a Docker image that needs to be downloaded from the cloud. The process is <strong>100% automatic</strong>, but you will need <a href="https://www.docker.com/community-edition#/download">Docker CE</a> installed in your server. If you enable OpenVidu recording service but there's no Docker installed, OpenVidu Server will fail to init, throwing the following exception:</p>
<p><code>Exception connecting to Docker daemon: you need Docker installed in this machine to enable OpenVidu recorder service</code></p>
<p><br></p>
<blockquote>
<p><strong><a href="../../deployment/deploying-aws/">OpenVidu CloudFormation</a> already includes the Docker image for recording service. You don't need to install anything or wait during the first execution if you use this type of deployment for OpenVidu Server</strong></p>
</blockquote>
<hr />
<h3 id="2-launch-openvidu-server-with-new-environment-variables">2. Launch OpenVidu Server with new environment variables</h3>
<p><em>(Only variables related with OpenVidu recording service are stated below. To see a complete list of available environment variables, visit <a href="../../reference-docs/openvidu-server-params/">OpenVidu Server configuration</a>)</em></p>
<h4 id="for-openvidu-server-jar">For OpenVidu Server JAR</h4>
<pre><code class="console">java -jar \
    -Dopenvidu.recording=true \
    -Dopenvidu.recording.path=/path/to/video/files \
    -Dopenvidu.recording.public-access=true \
openvidu-server.jar
</code></pre>

<ul>
<li><code>openvidu.recording</code>: if <em>true</em> OpenVidu recording service is enabled and sessions can be configured to be recorded. During the first execution of <em>openvidu-server.jar</em>, a Docker image (<a href="https://hub.docker.com/r/openvidu/openvidu-recording/">openvidu/openvidu-recording</a>) will be downloaded.</li>
<li><code>openvidu.recording.path</code>: where to store the recorded video files on the host machine.</li>
<li><code>openvidu.recording.public-access</code>: if <em>true</em> any client can connect to<p style="text-align: center; margin: 8px 0 8px 0; word-wrap: break-word;"><strong>https://OPENVIDU_SERVER_IP:OPENVIDU_PORT/recordings/any_session_file.mp4</strong></p> and access any recorded video file. If <em>false</em> this path will be secured with <code>openvidu.secret</code> param just as OpenVidu Server dashboard at <strong>https://OPENVIDU_SERVER_IP:OPENVIDU_PORT</strong></li>
</ul>
<h4 id="for-openvidu-server-docker-image">For OpenVidu Server Docker image</h4>
<p><strong><a href="https://hub.docker.com/r/openvidu/openvidu-server-kms/">openvidu/openvidu-server-kms</a></strong></p>
<pre><code class="console">docker run -p 4443:4443 --rm \
    -v /var/run/docker.sock:/var/run/docker.sock \
    -v /PATH/TO/VIDEO/FILES:/PATH/TO/VIDEO/FILES \
    -e openvidu.recording=true \
    -e MY_UID=$(id -u $USER) \
    -e openvidu.recording.path=/PATH/TO/VIDEO/FILES \
    -e openvidu.recording.public-access=true \
openvidu/openvidu-server-kms
</code></pre>

<p><strong><a href="https://hub.docker.com/r/openvidu/openvidu-server/">openvidu/openvidu-server</a></strong> (KMS up and running in the host machine)</p>
<pre><code class="console">docker run --net=&quot;host&quot; --rm \
    -v /var/run/docker.sock:/var/run/docker.sock \
    -v /PATH/TO/VIDEO/FILES:/PATH/TO/VIDEO/FILES \
    -e openvidu.recording=true \
    -e MY_UID=$(id -u $USER) \
    -e openvidu.recording.path=/PATH/TO/VIDEO/FILES \
    -e openvidu.recording.public-access=true \
openvidu/openvidu-server
</code></pre>

<ul>
<li><code>openvidu.recording</code>: <em>same as in OpenVidu Server JAR</em></li>
<li><code>openvidu.recording.path</code>: <em>same as in OpenVidu Server JAR</em></li>
<li><code>openvidu.recording.public-access</code>: <em>same as in OpenVidu Server JAR</em></li>
</ul>
<p>It is also necessary to mount 2 volumes and pass <code>MY_UID</code> variable:</p>
<ul>
<li><code>-v /var/run/docker.sock:/var/run/docker.sock</code>: gives openvidu-server container access to the local Docker daemon</li>
<li><code>-v /PATH/TO/VIDEO/FILES:/PATH/TO/VIDEO/FILES</code>: gives access to the recorded video files through the container</li>
<li><code>-e MY_UID=$(id -u $USER)</code>: for permission reasons</li>
</ul>
<p><br></p>
<blockquote>
<p><strong>IMPORTANT!</strong> <code>/PATH/TO/VIDEO/FILES</code> must be the same in property <code>openvidu.recording.path=/PATH/TO/VIDEO/FILES</code> and in both sides of flag <code>-v /PATH/TO/VIDEO/FILES:/PATH/TO/VIDEO/FILES</code></p>
</blockquote>
<hr />
<h3 id="3-configure-your-sessions-to-be-recorded">3. Configure your Sessions to be recorded</h3>
<p>Setting property <code>openvidu.recording</code> to <em>true</em> only automatically enables recordings for insecure sessions (those directly created from the client side. See <a href="../../troubleshooting/#4-does-my-app-need-a-server-side">this FAQ</a>).</p>
<p>In order to record a regular securized session, it is necessary to explicitly configure it through the <a href="../../reference-docs/REST-API/">REST API</a> or any of the server clients (<a href="../../reference-docs/openvidu-java-client/">openvidu-java-client</a>, <a href="../../reference-docs/openvidu-node-client/">openvidu-node-client</a>).</p>
<p>Recording can be configured in two ways: <strong>automatic recording</strong> or <strong>manual recording</strong>:</p>
<ul>
<li><strong>Automatic recording</strong>: your sessions will be recorded from the moment the first participant starts publishing media until the last participant leaves the session.</li>
<li><strong>Manual recording</strong>: you will have to tell openvidu-server to start and to stop the recording. The recording will never be automatically stopped even though all participants leave the session (in fact the session will not be closed until the recording stops).</li>
</ul>
<h4 id="api-rest">API REST</h4>
<ol>
<li>Initialize your sessions with this POST method: <a href="../../reference-docs/REST-API#post-apisessions">POST /api/sessions</a>. For sessions configured for automatic recording no more steps are needed</li>
<li>If you have configured your session for manual recording<ul>
<li>Start the recording with this POST method: <a href="../../reference-docs/REST-API#post-apirecordingsstart">POST /api/recordings/start</a></li>
<li>Stop the recording with this POST method: <a href="../../reference-docs/REST-API#post-apirecordingsstoprecording_id">POST /api/recordings/stop</a></li>
</ul>
</li>
</ol>
<h4 id="openvidu-java-client">openvidu-java-client</h4>
<p>Call <code>OpenVidu.createSession()</code> passing as optional parameter a <code>SessionProperties</code> object properly configured:</p>
<pre><code class="java">OpenVidu openvidu = new OpenVidu(OPENVIDU_URL, OPENVIDU_SECRET);
SessionProperties properties = new SessionProperties.Builder()
    .recordingMode(RecordingMode.MANUAL) // RecordingMode.ALWAYS for automatic recording
    .defaultRecordingLayout(RecordingLayout.BEST_FIT)
    .mediaMode(MediaMode.ROUTED)
    .build();
Session session = openVidu.createSession(properties);
</code></pre>

<p>If Session is configured with <code>RecordingMode.MANUAL</code>:</p>
<pre><code class="java">Recording recording = openVidu.startRecording(session.getSessionId()); // Starts recording
recording = openVidu.stopRecording(recording.getId()); // Stops recording
</code></pre>

<h4 id="openvidu-node-client">openvidu-node-client</h4>
<p>Call <code>OpenVidu.createSession()</code> passing as optional parameter a <code>SessionProperties</code> object properly configured:</p>
<pre><code class="javascript">var openvidu = new OpenVidu(OPENVIDU_URL, OPENVIDU_SECRET);
var properties = new SessionProperties.Builder()
    .recordingMode(RecordingMode.MANUAL) // RecordingMode.ALWAYS for automatic recording
    .defaultRecordingLayout(RecordingLayout.BEST_FIT)
    .mediaMode(MediaMode.ROUTED)
    .build();
var mySession = openvidu.createSession(properties);
</code></pre>

<p>If Session is configured with <code>RecordingMode.MANUAL</code>:</p>
<pre><code class="javascript">var recording;

openvidu.startRecording(sessionId) // Starts recording
.then(response =&gt; {
    recording = response;
})
.catch(error =&gt; console.error(error));

openvidu.stopRecording(recording.getId()) // Stops recording
.then(response =&gt; {
    recording = response
})
.catch(error =&gt; console.error(error));
</code></pre>

<p><br><br>
<hr></p>
<h1 id="custom-recording-layouts">Custom recording layouts</h1>
<p>You can create your own layouts for the session recording process. They are implemented with HTML/CSS/JS files, just as your OpenVidu application client-side.</p>
<h3 id="1-create-your-layout-with-htmlcssjs-files">1. Create your layout with HTML/CSS/JS files</h3>
<p>Put them in a path accessible to openvidu-server. There must be an <code>index.html</code> file as entrypoint for your custom layout:</p>
<p><br></p>
<ul>
<li>
<p><strong>WHAT SHOULD YOUR JS CODE DO</strong>: by making use of <a href="https://github.com/OpenVidu/openvidu/releases"><code>openvidu-browser.js</code></a> library, you need to connect a <em>recorder</em> participant to the session. This means:<br><br></p>
<p><strong>1) Your layout must connect to the session using a <em>token</em> like this:</strong></p>
<pre><code>'wss://' + location.hostname + ':4443?sessionId=' + SESSION_ID + '&amp;secret=' + SECRET + '&amp;recorder=true';
</code></pre>
<p>Being <code>SESSION_ID</code> and <code>SECRET</code> two parameters that will be url-encoded under ids <code>sessionId</code> and <code>secret</code> respectively. So, for example:</p>
<pre><code>var url = new URL(window.location.href);
var SESSION_ID = url.searchParams.get("sessionId");
var SECRET = url.searchParams.get("secret");
var TOKEN = 'wss://' + location.hostname + ':4443?sessionId=' + SESSION_ID + '&amp;secret=' + SECRET + '&amp;recorder=true';
var session = OV.initSession();
session.connect(TOKEN);
</code></pre>
<p><strong>2) You will need to subscribe to, at least, one event:</strong> <code>streamCreated</code> of Session object. That way you can subscribe your recorder to every stream when any user starts publishing (by default, the video element will be automatically removed on every <code>streamDestroyed</code> event). To sum up, this would be the simplest code you need to properly start your recorder participant:</p>
<pre><code>var OV = new OpenVidu();

var url = new URL(window.location.href);
var SESSION_ID = url.searchParams.get("sessionId");
var SECRET = url.searchParams.get("secret");
var TOKEN = 'wss://' + location.hostname + ':4443?sessionId=' + SESSION_ID + '&amp;secret=' + SECRET + '&amp;recorder=true';
var session = OV.initSession();

session.on("streamCreated", (event) =&gt; {
    session.subscribe(event.stream, 'html-id-where-insert-video');
});

session.connect(TOKEN);
</code></pre>
</li>
</ul>
<p><br></p>
<ul>
<li><strong>HOW TO IDENTIFY YOUR USERS</strong>: you can identify them by making use of property <code>Stream.connection.data</code> of the Stream object retrieved in Session event "streamCreated". That way you may know which particular user should be displayed in which particular HTML element of your layout. For example:<pre><code>session.on("streamCreated", (event) =&gt; {
    var stream = event.stream;
    if (stream.connection.data === 'userBigVideo') {
        session.subscribe(stream, 'big-video-div');
    } else if (stream.connection.data === 'userSmallVideo') {
        session.subscribe(stream, 'small-video-div');
    }
});
</code></pre>
</li>
</ul>
<hr />
<h3 id="2-add-new-properties-when-launching-openvidu-server">2. Add new properties when launching openvidu-server</h3>
<p>On the one hand a new property <code>openvidu.recording.custom-layout</code> and on the other hand, if using Docker images, a new <code>-v</code> option:</p>
<p><strong><a href="https://github.com/OpenVidu/openvidu/releases">openvidu-server.jar</a></strong></p>
<pre><code class="console">java -jar \
    -Dopenvidu.recording=true \
    -Dopenvidu.recording.path=/PATH/TO/VIDEO/FILES \
    -Dopenvidu.recording.public-access=true \
    -Dopenvidu.recording.custom-layout: /PATH/TO/INDEX/CUSTOM/LAYOUT \
openvidu-server.jar
</code></pre>

<p><strong><a href="https://hub.docker.com/r/openvidu/openvidu-server-kms/">openvidu/openvidu-server-kms</a></strong></p>
<pre><code class="console">docker run -p 4443:4443 --rm \
    -v /var/run/docker.sock:/var/run/docker.sock \
    -v /PATH/TO/VIDEO/FILES:/PATH/TO/VIDEO/FILES \
    -v /PATH/TO/INDEX/CUSTOM/LAYOUT:/PATH/TO/INDEX/CUSTOM/LAYOUT \
    -e MY_UID=$(id -u $USER) \
    -e openvidu.recording=true \
    -e openvidu.recording.path=/PATH/TO/VIDEO/FILES \
    -e openvidu.recording.custom-layout=/PATH/TO/INDEX/CUSTOM/LAYOUT \
openvidu/openvidu-server-kms
</code></pre>

<p><strong><a href="https://hub.docker.com/r/openvidu/openvidu-server/">openvidu/openvidu-server</a></strong> (KMS up and running in the host machine)</p>
<pre><code class="console">docker run --net=&quot;host&quot; --rm \
    -v /var/run/docker.sock:/var/run/docker.sock \
    -v /PATH/TO/VIDEO/FILES:/PATH/TO/VIDEO/FILES \
    -v /PATH/TO/INDEX/CUSTOM/LAYOUT:/PATH/TO/INDEX/CUSTOM/LAYOUT \
    -e MY_UID=$(id -u $USER) \
    -e openvidu.recording=true \
    -e openvidu.recording.path=/PATH/TO/VIDEO/FILES \
    -e openvidu.recording.custom-layout=/PATH/TO/INDEX/CUSTOM/LAYOUT \
openvidu/openvidu-server-kms
</code></pre>

<hr />
<h3 id="3-configure-your-sessions-to-use-your-custom-layout">3. Configure your sessions to use your custom layout</h3>
<p>Do exactly the same process explained <a href="../recording/#3-configure-your-sessions-to-be-recorded">here</a>, but changing <code>recordingLayout</code> from <code>BEST_FIT</code> to <code>CUSTOM</code>.</p>
<ul>
<li>If you are using the <em>API REST</em>, just change json body parameter <code>"recordingLayout":"BEST_FIT"</code> to <code>"recordingLayout":"CUSTOM"</code>.</li>
<li>
<p>If you are using <em>openvidu-java-client</em> or <em>openvidu-node-client</em>, change</p>
<p><code>SessionProperties.Builder().recordingLayout(RecordingLayout.BEST_FIT)</code></p>
<p>to</p>
<p><code>SessionProperties.Builder().recordingLayout(RecordingLayout.CUSTOM)</code></p>
</li>
</ul>
<p><br></p>
<hr />
<h2 id="configuring-multiple-custom-layouts">Configuring multiple custom layouts</h2>
<p>You can implement as many custom recording layouts as you want. Simply store each one of them (each one with its own <code>index.html</code> entrypoint file) in a subfolder under path <code>/PATH/TO/INDEX/CUSTOM/LAYOUT</code>. Then, when configuring your sessions as stated above in point 3, just add a new parameter besides changing <code>recordingLayout</code> property:</p>
<ul>
<li>If you are using the <em>API REST</em>, add an additional field to json body: <code>"recordingLayout":"CUSTOM", "customLayout":"RELATIVE/PATH/TO/INDEX"</code></li>
<li>If you are using <em>openvidu-java-client</em> or <em>openvidu-node-client</em>, create SessionProperties object with a new step: <code>new SessionProperties.Builder().recordingLayout(RecordingLayout.CUSTOM).customLayout("RELATIVE/PATH/TO/INDEX").build())</code></li>
</ul>
<p><br>
Path <code>RELATIVE/PATH/TO/INDEX</code> is the path from openvidu-server configuration property <code>openvidu.recording.custom-layout</code> to the specific <code>index.html</code> you want to use for a particular session recording. So, if you have the following folder tree structure:</p>
<pre><code>/opt
+-- /openvidu
|   +-- /my_custom_layouts
|       +-- index.html
|       +-- /layout1
|           +-- index.html
|       +-- /layout2
|           +-- index.html
/etc
    ...
</code></pre>

<p>You should start openvidu-server with property <code>openvidu.recording.custom-layout=/opt/openvidu/my_custom_layouts</code> and you can use any of the 3 <code>index.html</code> files for recording any of your sessions. To use the outer layout, just configure <code>recordingLayout</code> to <code>CUSTOM</code>. To use any of the inner layouts, also configure <code>customLayout</code> to <code>layout1</code> or <code>layout2</code>.</p>
<hr />
<h2 id="sample-custom-layout">Sample custom layout</h2>
<p>This is literally the simplest HTML for a custom recording layout. Use it as a template for building more complex ones.</p>
<pre><code class="html">&lt;html&gt;

&lt;head&gt;&lt;script src=&quot;openvidu-browser-2.0.0.min.js&quot;&gt;&lt;/script&gt;&lt;/head&gt;

&lt;body&gt;
    &lt;div id=&quot;videos&quot;&gt;&lt;/div&gt;
&lt;/body&gt;

&lt;script&gt;
    var url = new URL(window.location.href);
    var SESSION_ID = url.searchParams.get(&quot;sessionId&quot;);
    var SECRET = url.searchParams.get(&quot;secret&quot;);
    var TOKEN = 'wss://' + location.hostname + ':4443?sessionId=' + SESSION_ID + '&amp;secret=' + SECRET + '&amp;recorder=true';

    var OV = new OpenVidu();
    var session = OV.initSession();

    session.on(&quot;streamCreated&quot;, (event) =&gt; {
        session.subscribe(event.stream, 'videos');
    });
    session.connect(TOKEN)
        .then(() =&gt; { console.log('Recorder participant connected') })
        .catch(error =&gt; { console.error(error) });
&lt;/script&gt;

&lt;/html&gt;
</code></pre>

<hr>

<h1 id="local-recording">Local recording</h1>
<p>OpenVidu Browser offers an extremely simple API to record Streams directly in the client's browser. Check it out <a href="../../../api/openvidu-browser/classes/localrecorder.html">here</a>.</p>
<p><br></p> 
						</div>
					</div> <footer>
<hr>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../screen-share/" class="btn btn-xs btn-primary float-right" title="Screen share">Next &raquo;<span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../../how-do-i/send-messages/" class="btn btn-xs btn-primary" title="Send text messages"><span class="icon icon-circle-arrow-left"></span> &laquo; Prev</a>
      
    </div>
  


  
  <div id="edit-github">
  
	  <a href="https://github.com/OpenVidu/openvidu.io-docs/blob/master/docs/advanced-features/recording.md"><i class="icon ion-social-github"></i> Edit Documentation on GitHub</a>
  
  </div>
</footer> 
				</div>
			</div>
		</section>
</div>