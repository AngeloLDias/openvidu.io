---
layout: docs-layout
title: OpenVidu Documentation - Deploying OpenVidu Server and your app on AWS
active: documentation
---

<script src="/js/plugins/jquery.min.js"></script>

<link rel="stylesheet" href="/css/syntax.css" />
<script src="/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<script type="text/javascript">
	$(document).ready(function () {
		$('li.subnav_drop').find('ul.subnav').hide();
		$(".subnav").find("li:contains('Deploying OpenVidu Server and your app on AWS')").each(function (i, e) {
			var currentElement = $(e);
			currentElement.parent().css({
				"display": "block",
				"visibility": "visible"
			}); //css("background-color","blue");
			currentElement.css({
				"display": "block",
				"visibility": "visible"
			});
		});
		$('li.subnav_drop div').click(function (i, e) {
			//$('li.subnav_drop span').not(this).find('ul.subnav').hide();
			$(this).parent().find('ul.subnav').toggle();
		});

		var minHeight = $('#sticky-menu').outerHeight() + 100;
		$('#doc-container').css('min-height', minHeight + 'px');
	});

	$(".wy-nav-content").find("li:contains('Deploying OpenVidu Server and your app on AWS')").css('color', 'red');
</script>

<div id="doc-container" class="container text-justify">
		<div id="sticky-menu" class="col-lg-3 col-md-4 col-sm-12 col-xs-12">

			
			<nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
				<div class="wy-menu wy-menu-vertical" role="navigation" aria-label="main navigation">
					<div id="site-menu-title">
						<h3>Explore docs</h3>
						<hr>
					</div>
					<ul id="menu-list" class="current">
						 
						<li>
							<ul> 

<li class="toctree-l1 ">
    <a class="" href="../../home/">What is OpenVidu?</a> 
</li>

</ul>
						</li>
						  
						<li>
							<ul> 

<li class="subnav_drop"><div><span>Tutorials</span></div>
    <ul class="subnav" hidden>
          

<li class="toctree-l1 ">
    <a class="" href="../../tutorials/">Intro</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../tutorials/openvidu-hello-world/">openvidu-hello-world</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../tutorials/openvidu-insecure-js/">openvidu-insecure-js</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../tutorials/openvidu-insecure-angular/">openvidu-insecure-angular</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../tutorials/openvidu-js-java/">openvidu-js-java</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../tutorials/openvidu-mvc-java/">openvidu-mvc-java</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../tutorials/openvidu-js-node/">openvidu-js-node</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../tutorials/openvidu-mvc-node/">openvidu-mvc-node</a> 
</li>

 
</li>
</ul>

</ul>
						</li>
						  
						<li>
							<ul> 

<li class="subnav_drop"><div><span>Demos</span></div>
    <ul class="subnav" hidden>
          

<li class="toctree-l1 ">
    <a class="" href="../../demos/openvidu-getaroom/">openvidu-getaroom</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../demos/openvidu-call/">openvidu-call</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../demos/openvidu-classroom/">openvidu-classroom</a> 
</li>

 
</li>
</ul>

</ul>
						</li>
						  
						<li>
							<ul> 

<li class="subnav_drop"><div><span>How do I ... ?</span></div>
    <ul class="subnav" hidden>
          

<li class="toctree-l1 ">
    <a class="" href="../../how-do-i/create-session/">Create a session</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../how-do-i/join-session/">Join a session</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../how-do-i/leave-session/">Leave a session</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../how-do-i/subscribe-unsubscribe/">Subscribe/Unsubscribe from a stream</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../how-do-i/publish-unpublish/">Publish/Unpublish a stream</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../how-do-i/mute-audio-video/">Mute/Unmute audio and video</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../how-do-i/manage-videos/">Manage video players</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../how-do-i/share-data/">Share data between users</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../how-do-i/send-messages/">Send text messages</a> 
</li>

 
</li>
</ul>

</ul>
						</li>
						  
						<li>
							<ul> 

<li class="subnav_drop"><div><span>Advanced features</span></div>
    <ul class="subnav" hidden>
          

<li class="toctree-l1 ">
    <a class="" href="../../advanced-features/recording/">Recording</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../advanced-features/screen-share/">Screen share</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../advanced-features/speech-detection/">Speech detection</a> 
</li>

 
</li>
</ul>

</ul>
						</li>
						  
						<li>
							<ul> 

<li class="subnav_drop"><div><span>Reference Documentation</span></div>
    <ul class="subnav" hidden>
          

<li class="toctree-l1 ">
    <a class="" href="../../reference-docs/openvidu-browser/">openvidu-browser API</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../reference-docs/openvidu-java-client/">openvidu-java-client API</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../reference-docs/openvidu-node-client/">openvidu-node-client API</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../reference-docs/REST-API/">REST  API</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../reference-docs/openvidu-server-params/">OpenVidu Server configuration</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../../reference-docs/openvidu-server-cdr/">OpenVidu Server CDR</a> 
</li>

 
</li>
</ul>

</ul>
						</li>
						  
						<li>
							<ul> 

<li class="subnav_drop"><div><span>Deployment</span></div>
    <ul class="subnav" hidden>
          

<li class="toctree-l1 ">
    <a class="" href="../deploying-demos-aws/">Deploying OpenVidu Demos on AWS (TUTORIAL)</a> 
</li>

   

<li class="toctree-l1 current">
    <a class="current" href="./">Deploying OpenVidu Server and your app on AWS</a>  
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../deploying-ubuntu/">Deploying OpenVidu in Ubuntu</a> 
</li>

   

<li class="toctree-l1 ">
    <a class="" href="../custom-certificate/">Using your own certificate</a> 
</li>

 
</li>
</ul>

</ul>
						</li>
						  
						<li>
							<ul> 

<li class="subnav_drop"><div><span>Contribute</span></div>
    <ul class="subnav" hidden>
          

<li class="toctree-l1 ">
    <a class="" href="../../developing/">Developing OpenVidu</a> 
</li>

 
</li>
</ul>

</ul>
						</li>
						  
						<li>
							<ul> 

<li class="toctree-l1 ">
    <a class="" href="../../troubleshooting/">Troubleshooting / FAQ</a> 
</li>

</ul>
						</li>
						  
						<li>
							<ul> 

<li class="toctree-l1 ">
    <a class="" href="../../releases/">Releases</a> 
</li>

</ul>
						</li>
						 
					</ul>
				</div>
				&nbsp;
			</nav>
		</div>

		<section class="col-lg-9 col-md-8 col-sm-12 col-xs-12">
			
			<div>
				<div>

					<div role="main">
						<div class="section">
							 <h2 id="section-title">Deploying OpenVidu Server and your app on AWS</h2>

<hr>

<h2 id="deploying-openvidu-server-on-aws-with-cloud-formation">Deploying OpenVidu Server on AWS with Cloud Formation</h2>
<p>The deployment of OpenVidu can be a piece of cake if you have an AWS account. Just follow these steps:</p>
<h4 id="1-access-to-the-console-of-aws-cloud-formation">1. Access to the console of AWS Cloud Formation</h4>
<p><p><a href="https://console.aws.amazon.com/cloudformation" class="btn btn-xs btn-primary" title="Developing OpenVidu" target="_blank">Go to CloudFormation<span class="icon icon-circle-arrow-right"></span></a></p></p>
<h4 id="2-click-on-create-stack">2. Click on <em>Create Stack</em></h4>
<p><p>
    <img class="img-responsive deploy-img" src="/img/docs/deployment/CF_newstack.png">
  </p></p>
<h4 id="3-option-specify-an-amazon-s3-template-url-with-the-following-url">3. Option <em>Specify an Amazon S3 template URL</em> with the following URL</h4>
<p><code id="code-2">https://s3-eu-west-1.amazonaws.com/aws.openvidu.io/CF-OpenVidu-latest.json</code>
  <button id="btn-copy-2" class="btn-xs btn-primary btn-copy-code hidden-xs" data-toggle="tooltip" data-placement="button"
                                title="Copy to Clipboard">Copy</button></p>
<p><p>
    <img class="img-responsive deploy-img" src="/img/docs/deployment/CF_url.png">
  </p></p>
<h4 id="4-complete-the-configuration-fields">4. Complete the configuration fields</h4>
<p>We provide 3 different scenarios: you can use the default <strong>SELF-SIGNED CERTIFICATE</strong> stored in the application (users will need to accept the security alert) or if you have a custom domain, either allow <strong>LET'S ENCRYPT</strong> to automatically generate a valid and free certificate for your domain or use your own <strong>CUSTOM CERTIFICATE</strong> if you already have one.</p>
<div style="text-align: center" class="table-responsive">
  <table class="deploy-fields-table color-table">
    <tr>
      <th></th>
      <th>Self-Signed certificate</th>
      <th><em>Let's Encrypt</em> certificate</th>
      <th>Custom certificate</th>
    </tr>
    <tr>
      <td class="first-col">Stack name</td>
      <td><em>Your choice</em></td>
      <td><em>Your choice</em></td>
      <td><em>Your choice</em></td>
    </tr>
    <tr>
      <td class="first-col">Type of SSL Certificate</td>
      <td>selfsigned</td>
      <td>letsencrypt</td>
      <td>owncert</td>
    </tr>
    <tr>
      <td class="first-col">Email</td>
      <td></td>
      <td><em>Your choice</em></td>
      <td><em></em></td>
    </tr>
    <tr>
      <td class="first-col">Fully qualified domain name</td>
      <td></td>
      <td><em>Your custom domain</em></br><span class="field-comment">(for example: <em>openvidu.io</em>)</span></td>
      <td><em>Your custom domain</em></br><span class="field-comment">(for example: <em>openvidu.io</em>)</span></td>
    </tr>
    <tr>
      <td class="first-col">Elastic IP</td>
      <td></td>
      <td><em>One AWS Elastic IP you generated</em></br><span class="field-comment">(check <a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/elastic-ip-addresses-eip.html#using-instance-addressing-eips-allocating" target="_blank">AWS Docs</a> to generate a new one)</span></td>
      <td><em>One AWS Elastic IP you generated</em></br><span class="field-comment">(check <a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/elastic-ip-addresses-eip.html#using-instance-addressing-eips-allocating" target="_blank">AWS Docs</a> to generate a new one)</span></td>
    </tr>
    <tr>
      <td class="first-col">CRT File</td>
      <td></td>
      <td></td>
      <td><em>Content of your <strong>.crt</strong> file</em><br><span class="field-comment">-----BEGIN CERTIFICATE-----<br>fooFOOfooFOOfooFOOfoo...<br>-----END CERTIFICATE-----</span></td>
    </tr>
    <tr>
      <td class="first-col">KEY File</td>
      <td></td>
      <td></td>
      <td><em>Content of your <strong>.key</strong> file</em><br><span class="field-comment">-----BEGIN RSA PRIVATE KEY-----<br>fooFOOfooFOOfooFOOfoo...<br>-----END RSA PRIVATE KEY-----</span></td>
    </tr>
    <tr>
      <td class="first-col">OpenVidu Secret</td>
      <td><em>Your choice</em></td>
      <td><em>Your choice</em></td>
      <td><em>Your choice</em></td>
    </tr>
    <tr>
      <td class="first-col">Free HTTP access to recorded videos<br><span class="field-comment">(see <code>openvidu.recording.public-access</code> property <a href="/docs/reference-docs/openvidu-server-params/#list-of-configuration-parameters-when-launching-openvidu-server">here</a>)<span></td>
      <td><em>true / false</em></td>
      <td><em>true / false</em></td>
      <td><em>true / false</em></td>
    </tr>
    <tr>
      <td class="first-col">Instance Type</td>
      <td><em>Your choice</em></br><span class="field-comment">(at least <code>t2.medium</code> recommended)</span></td>
      <td><em>Your choice</em></br><span class="field-comment">(at least <code>t2.medium</code> recommended)</span></td>
      <td><em>Your choice</em></br><span class="field-comment">(at least <code>t2.medium</code> recommended)</span></td>
    </tr>
    <tr>
      <td class="first-col">KeyName</td>
      <td><em>Your choice</em></br><span class="field-comment">(check <a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-key-pairs.html" target="_blank">AWS Docs</a> to create a new one)</span></td>
      <td><em>Your choice</em></br><span class="field-comment">(check <a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-key-pairs.html" target="_blank">AWS Docs</a> to create a new one)</span></td>
      <td><em>Your choice</em></br><span class="field-comment">(check <a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-key-pairs.html" target="_blank">AWS Docs</a> to create a new one)</span></td>
    </tr>
  </table>
</div>

<blockquote>
<p>If you are using <strong><em>LET'S ENCRYPT CERTIFICATE</em></strong>, of course you will need to register your ElasticIP in your DNS hosting service and associate it with the fully qualified domain name.</p>
</blockquote>
<h4 id="5-create-your-stack">5. Create your Stack</h4>
<p>No extra options are necessary. Click on  <strong><em>Next</em></strong> ➞ <strong><em>Next</em></strong> ➞ <strong><em>Create</em></strong></p>
<p><strong><em>CREATE_IN_PROGRESS</em></strong> status will show up. You will now have to wait for a few minutes until it shows <strong><em>CREATE_COMPLETE</em></strong>.</p>
<h4 id="6-access-and-test-your-openvidu-server-through-your-new-ip">6. Access and test your OpenVidu Server through your new IP</h4>
<p>After status changes to <strong><em>CREATE_COMPLETE</em></strong>, go to <strong><em>Outputs</em></strong> tab to get your brand new IP and click on it (or if you have deployed under your own custom domain, then you should access through it).</p>
<p><p>
    <img class="img-responsive deploy-img" src="/img/docs/deployment/CF_output.png">
  </p></p>
<p>You will connect to your OpenVidu dashboard. To access to it use:</p>
<ul>
<li><code>OPENVIDUAPP</code> as username</li>
<li>The secret you chose on <a href="#4-complete-the-configuration-fields">Step 4</a> as password (field <strong>OpenVidu Secret</strong> in the table). </li>
</ul>
<p>At OpenVidu dashboard you can test the video transmission. You can now add your own application to your instance. To learn how check the <a href="#adding-your-own-app-to-cloudformation-openvidu-server">next section</a>.</p>
<h2 id="adding-your-own-app-to-cloudformation-openvidu-server">Adding your own app to CloudFormation OpenVidu Server</h2>
<p>Once you have deployed your CloudFormation OpenVidu Server and checked that it is up and running, you can easily add your own application to the instance. Follow these steps:</p>
<h4 id="1-upload-your-app-to-your-ec2-instance">1. Upload your app to your EC2 instance</h4>
<p>In Linux/Mac you can use <a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AccessingInstancesLinux.html#AccessingInstancesLinuxSCP">scp</a> command. In Windows (or If you prefer a more friendly GUI) you can use <a href="https://beamtic.com/connect-to-aws-ec2-with-ftp">FileZilla</a>. Furthermore, if your app is stored in a GitHub repo, you can directly clone it once you connect to your instance.</p>
<p>Remember that the key will be the same you indicated when configuring the <a href="#4-complete-the-configuration-fields">CloudFormation fields</a>. </p>
<h4 id="2-connect-to-your-ec2-instance-through-ssh">2. Connect to your EC2 instance through SSH</h4>
<p>Remember that the key will be the same you indicated when configuring the <a href="#4-complete-the-configuration-fields">CloudFormation fields</a>. In case of doubt, check <a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AccessingInstancesLinux.html">AWS docs</a>.</p>
<h4 id="3-configure-your-app">3. Configure your app</h4>
<p>Depending on the framework of your app:</p>
<p><br></p>
<h5 id="plain-htmlcssjs">Plain HTML/CSS/JS</h5>
<ul>
<li>
<p>If your app doesn't have a server-side and it is plain HTML, CSS and JavaScript, you just have to add your web files into <code>/var/www/html/</code>. You will have instant access to it through <code>https://AMAZON_URL_OR_YOUR_CUSTOM_DOMAIN/</code></p>
<blockquote>
<p>If you want to test the deployment of a plain HTML/CSS/JS app, you can use <strong><a href="https://github.com/OpenVidu/openvidu-tutorials/tree/master/openvidu-insecure-js">openvidu-insecure-js</a></strong></p>
</blockquote>
</li>
</ul>
<p><br></p>
<h5 id="java">Java</h5>
<ul>
<li>
<p>Copy your JAR or WAR into <code>/opt/</code></p>
</li>
<li>
<p>Write a script to launch your app with all the parameters it needs, and store it under <code>/opt/</code>. For example, a file <code>/opt/YOUR_LAUNCHER.sh</code> containing:</p>
<pre><code>cd /opt
java -jar -Dserver.port=4040 myapp.jar
</code></pre>
<blockquote>
<p><strong>IMPORTANT 1</strong>: It is crucial to navigate to <strong>/opt</strong> before the launching command. Otherwise, the system will surely have some problems for finding your files</p>
<p><strong>IMPORTANT 2</strong>: Obviously your app will need Java to run. You must install the correct version of Java in your machine (check version: <code>java -version</code>)</p>
<p><strong>IMPORTANT 3</strong>: Make sure the script you made is executable.(For Linux you could do like this <code>chmod +x YOUR_LAUNCHER.sh</code>)</p>
</blockquote>
</li>
<li>
<p>Configure Nginx: add a new <strong>location</strong> directive to the file <code>/etc/nginx/sites-enabled/default</code>, inside the <code>server { }</code> group:</p>
<pre><code>  location / {
    rewrite /(.*) /$1 break;
    proxy_pass https://localhost:PORT;
  }
</code></pre>
<p>For example</p>
<pre><code>  location / {
    rewrite /(.*) /$1 break;
    proxy_pass https://localhost:4040;
  }
</code></pre>
</li>
<li>
<p>Configure Supervisor: add the script you wrote in the second step to the file <code>/etc/supervisor/conf.d/openvidu.conf</code> like this:</p>
<pre><code>  [program:YOUR_APP]
  command=/bin/bash /opt/YOUR_LAUNCHER.sh YOUR_APP_PARAM_1 YOUR_APP_PARAM_2 ...
  redirect_stderr=true
</code></pre>
<p>Now your <code>/etc/supervisor/conf.d/openvidu.conf</code> must looks like this:</p>
<pre><code>  [supervisord]
  nodaemon=true
  logfile=/var/log/supervisor/supervisord.log
  pidfile=/var/run/supervisord.pid
  loglevel=debug

  [program:openvidu-server]
  command=java -jar -Dopenvidu.secret="MY_SECRET" -Dserver.ssl.enabled=false -Dopenvidu.pu$

  [program:YOUR_APP]
  command=/bin/bash /opt/YOUR_LAUNCHER.sh YOUR_APP_PARAM_1 YOUR_APP_PARAM_2 ...
  redirect_stderr=true
</code></pre>
<blockquote>
<p>To connect your Java app to OpenVidu Server in order to get your sessionIds and tokens (whether you use the <a href="../../reference-docs/REST-API/">REST API</a> or <a href="../../reference-docs/openvidu-java-client/">openvidu-java-client</a>), you will need to use the URL <code>https://localhost:4443</code>. <em>localhost</em> because both your app and OpenVidu Server run in the same machine. <em>4443</em> because there's where OpenVidu Server listens for petitions. For example, our tutorial <em>openvidu-js-java</em> sets this parameter as an environment variable <a href="https://github.com/OpenVidu/openvidu-tutorials/blob/ba5121c622ea59aa9708021f3635f922acb3ff73/openvidu-js-java/src/main/resources/application.properties#L8">right here</a>.</p>
</blockquote>
</li>
<li>
<p>Restart Nginx: <code>systemctl restart nginx</code></p>
</li>
<li>
<p>Restart Supervisor: <code>systemctl restart supervisor</code></p>
</li>
<li>
<p>You will have access to your app through <code>https://AMAZON_URL_OR_YOUR_CUSTOM_DOMAIN/</code></p>
</li>
<li>
<p>Troubleshooting: If your app is not working as expected, there are a few files you should check for debugging: <code>/var/log/nginx/</code> (info about the proxy), <code>/var/log/supervisor/</code> (output of your app). You can also try to connect to your app directly through the port like <code>https://AMAZON_URL_OR_YOUR_CUSTOM_DOMAIN:YOUR_APP_PORT</code></p>
<blockquote>
<p>If you want to test the deployment of a Java app, you can use <strong>openvidu-js-java</strong> or <strong>openvidu-mvc-java</strong> (<a href="https://github.com/OpenVidu/openvidu-tutorials/releases">release here</a>)</p>
</blockquote>
</li>
</ul>
<p><br></p>
<h5 id="node">Node</h5>
<ul>
<li>
<p>Add your web files into <code>/opt/</code></p>
</li>
<li>
<p>Write a script to launch your app with all the parameters it needs, and store it under <code>/opt/</code>. For example, a file <code>/opt/YOUR_LAUNCHER.sh</code> containing:</p>
<pre><code>cd /opt
node myserver.js 4040
</code></pre>
<blockquote>
<p><strong>IMPORTANT 1</strong>: It is crucial to navigate to <strong>/opt</strong> before the launching command. Otherwise, the system will surely have some problems for finding your files</p>
<p><strong>IMPORTANT 2</strong>: Obviously your app will need Node to run. You must install the correct version of Node in your machine (check version: <code>nodejs -v</code>)</p>
<p><strong>IMPORTANT 3</strong>: Make sure the script you made is executable.(For Linux you could do like this <code>chmod +x YOUR_LAUNCHER.sh</code>)</p>
</blockquote>
</li>
<li>
<p>Configure Nginx: add a new <strong>location</strong> directive to the file <code>/etc/nginx/sites-enabled/default</code>, inside the <code>server { }</code> group::</p>
<pre><code>  location / {
    rewrite /(.*) /$1 break;
    proxy_pass https://localhost:PORT;
  }
</code></pre>
<p>For example</p>
<pre><code>  location / {
    rewrite /(.*) /$1 break;
    proxy_pass https://localhost:4040;
  }
</code></pre>
</li>
<li>
<p>Restart Nginx: <code>systemctl restart nginx</code></p>
</li>
<li>
<p>Configure Supervisor: add the script you wrote in the second step to <code>/etc/supervisor/conf.d/openvidu.conf</code> like this:</p>
<pre><code>  [program:YOUR_APP]
  command=/bin/bash /opt/YOUR_LAUNCHER.sh YOUR_APP_PARAM_1 YOUR_APP_PARAM_2 ...
  redirect_stderr=true
</code></pre>
<p>Now your <code>/etc/supervisor/conf.d/openvidu.conf</code> must looks like this:</p>
<pre><code>  [supervisord]
  nodaemon=true
  logfile=/var/log/supervisor/supervisord.log
  pidfile=/var/run/supervisord.pid
  loglevel=debug

  [program:openvidu-server]
  command=java -jar -Dopenvidu.secret="MY_SECRET" -Dserver.ssl.enabled=false -Dopenvidu.pu$

  [program:YOUR_APP]
  command=/bin/bash /opt/YOUR_LAUNCHER.sh YOUR_APP_PARAM_1 YOUR_APP_PARAM_2 ...
  redirect_stderr=true
</code></pre>
<blockquote>
<p>To connect your Node app to OpenVidu Server in order to get your sessionIds and tokens (whether you use the <a href="../../reference-docs/REST-API/">REST API</a> or <a href="../../reference-docs/openvidu-node-client/">openvidu-node-client</a>), you will need to use the URL <code>https://localhost:4443</code>. <em>localhost</em> because both your app and OpenVidu Server run in the same machine. <em>4443</em> because there's where OpenVidu Server listens for petitions. For example, our tutorial <em>openvidu-js-node</em> expects this parameter as the first argument on launch command <a href="https://github.com/OpenVidu/openvidu-tutorials/blob/ba5121c622ea59aa9708021f3635f922acb3ff73/openvidu-js-node/server.js#L64">right here</a>.</p>
</blockquote>
</li>
<li>
<p>Restart Supervisor: <code>systemctl restart supervisor</code></p>
</li>
<li>
<p>You will have access to your app through <code>https://AMAZON_URL_OR_YOUR_CUSTOM_DOMAIN/</code></p>
</li>
<li>
<p>Troubleshooting: If your app is not working as expected, there are a few files you should check for debugging: <code>/var/log/nginx/</code> (info about the proxy), <code>/var/log/supervisor/</code> (output of your app). You can also try to connect to your app directly through the port like <code>https://AMAZON_URL_OR_YOUR_CUSTOM_DOMAIN:YOUR_APP_PORT</code></p>
<blockquote>
<p>If you want to test the deployment of a Node app, you can use <strong><a href="https://github.com/OpenVidu/openvidu-tutorials/tree/master/openvidu-js-node">openvidu-js-node</a></strong></p>
</blockquote>
</li>
</ul>
<p><br></p>
<h5 id="php-ruby-python-net">PHP, Ruby, Python, .NET...</h5>
<p>We are not going to spell out in detail what is to be done with the rest of backend technologies, but you can get the idea from the Java and Node steps above. It is always the same process: take your app to your instance, place it under <code>/opt/</code>, configure Nginx and Supervisor (this last with the necessary launching script depending on your technology) and relaunch both services. Be sure that your machine has all the necessary dependencies and technologies to execute your application, depending on the framework (Java for a Java app, Node for a Node app, Ruby for a Ruby app...)</p>
<p>Voilà! It is really this simple.</p>
<h4 id="ps-multiple-apps-in-the-same-instance">PS: Multiple apps in the same instance</h4>
<p>To launch multiple apps in the same instance, just store each one of them inside its own folder under <code>/opt/</code>. For example:</p>
<ul>
<li><code>/opt/YOUR_APP_1</code> : will be available at <code>https://AMAZON_URL_OR_YOUR_CUSTOM_DOMAIN/YOUR_APP_1/</code></li>
<li><code>/opt/YOUR_APP_2</code> : will be available at <code>https://AMAZON_URL_OR_YOUR_CUSTOM_DOMAIN/YOUR_APP_2/</code></li>
</ul>
<p>The other steps explained above also need some adjustments related to paths:</p>
<ul>
<li>
<p>Configure Nginx: now it would be...</p>
<pre><code>location /YOUR_APP_1 {
  rewrite /YOUR_APP_1(.*) /$1 break;
  proxy_pass https://localhost:PORT1;
}

location /YOUR_APP_2 {
  rewrite /YOUR_APP_2(.*) /$1 break;
  proxy_pass https://localhost:PORT2;
}
</code></pre>
</li>
<li>
<p>Configure Supervisor: now...</p>
<pre><code>  [program:YOUR_APP_1]
  command=/bin/bash /opt/YOUR_APP_1/YOUR_LAUNCHER_1.sh YOUR_APP1_PARAM_1 YOUR_APP1_PARAM_2 ...
  redirect_stderr=true

  [program:YOUR_APP_2]
  command=/bin/bash /opt/YOUR_APP_2/YOUR_LAUNCHER_2.sh YOUR_APP2_PARAM_1 YOUR_APP2_PARAM_2 ...
  redirect_stderr=true
</code></pre>
</li>
</ul>
<script src="/js/copy-btn.js"></script>

<h2 id="connecting-your-external-app-to-cloudformation-openvidu-server">Connecting your external app to CloudFormation OpenVidu Server</h2>
<p>The best production setup for OpenVidu is having your application deployed in a different dedicated server. That is, not being included in the same host as OpenVidu Server, which is the scenario explained in the <a href="#adding-your-own-app-to-cloudformation-openvidu-server">previous section</a> (that all-in-one scenario is easier for the first approach to the deployment of your OpenVidu app. Try it if you want detailed instructions on how to deploy your app).</p>
<p>Once you have deployed your CloudFormation OpenVidu Server and checked that it is up and running, and after setting up your own application in its dedicated server:</p>
<ul>
<li>Make sure you know your <strong>OpenVidu Server public IP</strong>. That includes the protocol (<code>https</code>), the location and the port. For example: <code>https://YOUR_SERVER_IP:4443/</code></li>
<li>Use it in your application server to perform the <strong><a href="../../reference-docs/REST-API/">REST</a></strong> operations, or to initialize your OpenVidu object if you are making use of <strong><a href="../../reference-docs/openvidu-java-client/">openvdiu-java-client</a></strong> or <strong><a href="../../reference-docs/openvidu-node-client/">openvidu-node-client</a></strong> :<ul>
<li><em>REST</em> operations to <code>https://OPENVIDUSERVER_PUBLIC_IP/api/METHOD</code> </li>
<li><em>openvidu-java-client</em> entrypoint is <code>new OpenVidu(OPENVIDUSERVER_PUBLIC_IP, OPENVIDU_SECRET)</code></li>
<li><em>openvidu-node-client</em> entrypoint is <code>new OpenVidu(OPENVIDUSERVER_PUBLIC_IP, OPENVIDU_SECRET)</code> </li>
</ul>
</li>
</ul>
<p><br></p>
<blockquote>
<p>In the one-server-scenario of the <a href="#adding-your-own-app-to-cloudformation-openvidu-server">previous section</a> the OpenVidu Server public IP would be <code>https://localhost:4443</code>, as both OpenVidu Server and your app live in the same host.</p>
</blockquote> 
						</div>
					</div> <footer>
<hr>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../deploying-ubuntu/" class="btn btn-xs btn-primary float-right" title="Deploying OpenVidu in Ubuntu">Next &raquo;<span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../deploying-demos-aws/" class="btn btn-xs btn-primary" title="Deploying OpenVidu Demos on AWS (TUTORIAL)"><span class="icon icon-circle-arrow-left"></span> &laquo; Prev</a>
      
    </div>
  


  
  <div id="edit-github">
  
	  <a href="https://github.com/OpenVidu/openvidu.io-docs/blob/master/docs/deployment/deploying-aws.md"><i class="icon ion-social-github"></i> Edit Documentation on GitHub</a>
  
  </div>
</footer> 
				</div>
			</div>
		</section>
</div>